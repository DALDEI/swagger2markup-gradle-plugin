= Swagger2Markup Gradle Plugin
:author: Robert Winkler
:version: 0.1.0
:hardbreaks:

image:https://travis-ci.org/RobWin/swagger2markup-gradle-plugin.svg["Build Status", link="https://travis-ci.org/RobWin/swagger2markup-gradle-plugin"] image:https://coveralls.io/repos/RobWin/swagger2markup-gradle-plugin/badge.svg["Coverage Status", link="https://coveralls.io/r/RobWin/swagger2markup-gradle-plugin"] image:https://api.bintray.com/packages/robwin/maven/swagger2markup-gradle-plugin/images/download.svg[link="https://bintray.com/robwin/maven/swagger2markup-gradle-plugin/_latestVersion"] image:http://img.shields.io/badge/license-ASF2-blue.svg["Apache License 2", link="http://www.apache.org/licenses/LICENSE-2.0.txt"]
image:https://badges.gitter.im/Join%20Chat.svg[link="https://gitter.im/RobWin/swagger2markup?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge"]

== Overview

The primary goal https://github.com/RobWin/swagger2markup[Swagger2Markup] is to *simplify the generation of an up-to-date RESTful API documentation by combining documentation that's been hand-written with auto-generated API documentation* produced by https://github.com/swagger-api[Swagger]. The result is intended to be an *up-to-date, easy-to-read, on- and offline user guide*, comparable to https://developer.github.com/v3/[GitHub's API documentation]. The output of the plugin can be used as an alternative to https://github.com/swagger-api/swagger-ui[swagger-ui] and can be served as static content.

The Swagger2Markup Gradle Plugin simplifies the usage of https://github.com/RobWin/swagger2markup[Swagger2Markup] by adding a task which converts a Swagger JSON or YAML file into several *AsciiDoc* or *GitHub Flavored Markdown* documents which can be combined with hand-written documentation. The plugin supports the Swagger 1.2 and 2.0 specification. Internally the plugin uses https://github.com/RobWin/swagger2markup[Swagger2Markup] which in turn uses the _official_ https://github.com/swagger-api/swagger-parser[swagger-parser] and my https://github.com/RobWin/markup-document-builder[markup-document-builder].

You can use the plugin to convert your design-first Swagger YAML file into a human-readable format and combine it with hand-written documentation. As an alternative, you can choose the implementation-first approach and use Swagger2Markup together with https://github.com/swagger-api/swagger-core/tree/master/samples/java-jersey2[Swagger JAX-RS], https://github.com/springfox/springfox[springfox] or https://github.com/spring-projects/spring-restdocs[spring-restdocs]. See https://github.com/RobWin/swagger2markup[Swagger2Markup user guide] for more details.

http://asciidoctor.org/docs/asciidoc-writers-guide/[AsciiDoc] is preferable to Markdown as it has more features. AsciiDoc is a text document format for writing documentation, articles, books, ebooks, slideshows, web pages and blogs. AsciiDoc files can be converted to *HTML*, *PDF* and *EPUB*. AsciiDoc is much better suited for describing public APIs than *JavaDoc* or *Annotations*.

You can generate your HTML5, PDF and EPUB documentation via the https://github.com/asciidoctor/asciidoctor-gradle-plugin[asciidoctor-gradle-plugin] or https://github.com/aalmiray/markdown-gradle-plugin[markdown-gradle-plugin]. You can also use https://github.com/jbake-org/jbake[JBake], https://github.com/tomchristie/mkdocs[MkDocs], https://github.com/rtfd/readthedocs.org[ReadTheDocs] or https://github.com/tripit/slate[slate] to publish your AsciiDoc or Markdown documentation.

The project requires at least JDK 7.

== Usage

The project is published in JCenter and Maven Central.

Add the following snippet to your Gradle build file:

[source,groovy]
[subs="attributes"]
----
buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'io.github.robwin:swagger2markup-gradle-plugin:{version}'
    }
}

apply plugin: 'io.github.robwin.swagger2markup'
----

The plugin adds a new task named `convertSwagger2markup`. This task exposes a few properties as part of its configuration.

.Properties
[horizontal]
inputDir:: specifies the directory where the swagger source is located. Use `inputDir file('src/docs/swagger')`
    Type: File, but any object convertible with `project.file` can be passed. Default: `src/docs/swagger`.
outputDir:: specifies the directory where the output should be stored. Use `inputDir file("${buildDir}/asciidoc")`
    Type: File, but any object convertible with `project.file` can be passed. Default: `$buildDir/asciidoc`.
examplesDir:: specifies the directory where example snippets from spring-restdocs are located.
    Type: File, but any object convertible with `project.file` can be passed. Default: empty
descriptionsDir:: specifies the directory where hand-written descriptions are located.
    Type: File, but any object convertible with `project.file` can be passed. Default: empty
schemasDir:: specifies the directory where JSON or XML schema files are located.
    Type: File, but any object convertible with `project.file` can be passed. Default: empty
markupLanguage:: specifies the markup output format.
    Type: MarkupLanguage. Can be MarkupLanguage.ASCIIDOC or MarkupLanguage.MARKDOWN Default: `MarkupLanguage.ASCIIDOC`

=== Example

[source,groovy]
----
convertSwagger2markup {
    inputDir file('src/docs/swagger')
    examplesDir file("src/docs/asciidoc/generated")
    descriptionsDir file("src/docs/asciidoc")
    schemasDir file("src/docs/schemas")
    markupLanguage = MarkupLanguage.MARKDOWN
}
----

== Demo

Using the Swagger2Markup is simple. For example, if you are using https://github.com/spring-projects/spring-boot[Spring Boot] and https://github.com/springfox/springfox[springfox], you can generate your Swagger JSON file during the unit phase, convert the Swagger file into AsciiDoc, convert AsciiDoc into HTML and PDF, copy the documentation into the Jar file and serve it as static content. That way there is no runtime overhead and there are no additional runtime library dependencies required.
The quickest way to get started is to look at the demo project https://github.com/RobWin/spring-swagger2markup-demo[spring-swagger2markup-demo]. The demo shows how to generate static docs (HTML5 and PDF) with the Swagger2Markup Gradle Plugin and serve them as static content in a Spring Boot App under http://localhost:9080/docs/index.html and http://localhost:9080/docs/index.pdf.

=== Full configuration example

ext {
    generatedDocumentation = file("${buildDir}/asciidoc")
}

test {
    systemProperty 'org.springframework.restdocs.outputDir', generatedDocumentation
    systemProperty 'io.springfox.staticdocs.outputDir', generatedDocumentation
    outputs.dir generatedDocumentation
}

convertSwagger2markup {
    dependsOn test
    examplesDir generatedDocumentation
}

asciidoctor {
    dependsOn convertSwagger2markup
    sources {
        include 'index.adoc'
    }
    backends = ['html5', 'pdf']
    attributes = [
            doctype: 'book',
            toc: 'left',
            toclevels: '2',
            numbered: '',
            sectlinks: '',
            sectanchors: '',
            hardbreaks: '',
            generated: generatedDocumentation
    ]
}

jar {
    dependsOn asciidoctor
    from ("${asciidoctor.outputDir}/html5") {
        into 'static/docs'
    }
    from ("${asciidoctor.outputDir}/pdf") {
        into 'static/docs'
    }
}
----


== License

Copyright 2015 Robert Winkler

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
